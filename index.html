<!DOCTYPE html>
<meta charset="utf-8">
<head>

    <script type="text/javascript" src="./lib/d3.v5.min.js"></script>
    <script type="text/javascript" src="./lib/d3-dsv.min.js"></script>
    <script type="text/javascript" src="./lib/d3-legend.min.js"></script>
    <script type="text/javascript" src="./lib/d3-tip.min.js"></script>
    <script type="text/javascript" src="./lib/d3-geo-projection.v2.min.js"></script>
    <script type="text/javascript" src="./lib/topojson.v2.min.js"></script>

    <style>


    </style>

    <title></title>
</head>


<body>

<script>

    var width = 700
    var height = 1400

    var chicagomap = d3.json("boundaries_chicago_census_neighborhoods.geojson")

    var svg = d3.select("body").append("svg")
        .attr("preserveAspectRatio", "xMinYMin meet")
        .attr("viewBox", "0 0 " + width + " " + height)
        .classed("svg-content", true);

    var projection = d3.geoMercator()
        .center([0, 41.8781])
        .rotate([87.6298, 0]).scale(50000)

    var path = d3.geoPath().projection(projection);

    var tip = d3.tip().html(function (d) {
        console.log(d.properties)
        return d.properties.pri_neigh;
    });

    Promise.resolve((chicagomap).then(function (chi_map) {

        var neighborhoods = svg.append("g")

        svg.call(tip)

        neighborhoods.selectAll('path')
            .data(chi_map.features)
            .enter()
            .append('path')
            .attr('d', path)
            .style("fill", "teal")
            .style("stroke-width", "0.6")
            .style("stroke", "black")
            .on('mouseover', function (chi_map) {
                    tip.show(chi_map);

                    d3.select(this)
                        .style("opacity", 1)
                        .style("stroke", "white")
                        .style("stroke-width", 3);
                })
                .on('mouseout', function (d) {
                    tip.hide(d);

                    d3.select(this)
                        .style("opacity", 1)
                        .style("stroke", "black")
                        .style("stroke-width", 0.6);
                });

    }))


</script>

</body>

</html>